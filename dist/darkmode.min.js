!function(e,t){"function"==typeof define&&define.amd?define([],t("DarkMode")):"object"==typeof exports?module.exports=t("DarkMode"):e.DarkMode=t("DarkMode")}(this,function(e){"use strict";var t={light:!1,dark:!1,startAt:"21:00",endAt:"06:00",checkSystemScheme:!0,saveOnToggle:!0},o=function(e,o){var r,n={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r]);return n},r=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],i=function(e){var t=new Date,o=e.split(":");return t.setHours(o[0],o[1],0,0)},s=function(e){return"light"===e?"dark":"light"};function d(e){this.options=o(t,e),this.init()}return d.prototype={init:function(){this.options.saveOnToggle||localStorage.removeItem("dm-mode");var e=this.getMode();if(this.options.checkSystemScheme){var t=this;window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){return e.matches&&t.setMode("dark")}),window.matchMedia("(prefers-color-scheme: light)").addListener(function(e){return e.matches&&t.setMode("light")})}return this.setMode(e),!0},getMode:function(){if(this.mode)return this.mode;var e=localStorage.getItem("dm-mode");if(e)return e;if(this.options.checkSystemScheme){var t=this.getSystemScheme();if("auto"!==t)return this.mode=t,this.mode}var o=i(this.options.startAt),r=i(this.options.endAt),n=(new Date).getTime();return r<n&&n>o?"dark":"light"},setMode:function(e){if("light"!==e&&"dark"!==e)return console.error("setMode","Invalid value"),!1;this.mode=e;var t,o,i,d=s(e);if(this.options[e]){var a=document.getElementById("dm-"+e),m=document.getElementById("dm-"+d);a?a&&a.removeAttribute("disabled"):(t="dm-"+e,o=this.options[e],(i=document.createElement("link")).id=t,i.rel="stylesheet",i.type="text/css",i.href=o,r.getElementsByTagName("link")[0]?r.insertBefore(i,r.getElementsByTagName("link")[0]):r.appendChild(i)),m&&m.setAttribute("disabled",!0)}return n.classList.add("dm-"+e),n.classList.remove("dm-"+d),!0},isModeSaved:function(){return Boolean(localStorage.getItem("dm-mode"))},clearSavedMode:function(){return localStorage.removeItem("dm-mode"),!0},toggleMode:function(){var e=s(this.mode);return this.setMode(e),this.options.saveOnToggle&&localStorage.setItem("dm-mode",e),e},toggleTheme:function(){return this.toggleMode()},getSystemScheme:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"auto"}},d});